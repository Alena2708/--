
import UIKit
import CoreData
class MasterViewController: UITableViewController {
  
  // MARK: - Properties
  var detailViewController: DetailViewController? = nil
  var cities = [City]()
  
  var filteredCandies = [City]()
  let searchController = UISearchController(searchResultsController: nil)
  
  // MARK: - View Setup
  override func viewDidLoad() {
    super.viewDidLoad()
    
    // Setup the Search Controller
    searchController.searchResultsUpdater = self
    searchController.searchBar.delegate = self
    definesPresentationContext = true
    searchController.dimsBackgroundDuringPresentation = false
    
    // Setup the Scope Bar
   searchController.searchBar.scopeButtonTitles = ["Город", "Место"]
   tableView.tableHeaderView = searchController.searchBar
   
 
    cities = [
//********************/
    /*    City(id:1,category:"Город", name:"Абзаково",text:"Оздоровительно-спортивный центр Абзаково расположен в Башкортостане, на восточных склонах одного из южно-урвльских хребтов Кырыкты-Тау, на склонах горы Шайтан, на высоте 820 метров над уровнем моря.Здесь любят отдыхать не только жители блиайшего города - Магнитогорска, но и жители Урала, Сибири, а так же любител  зимних видов спорта из тенральных районов Росии. Абзаково располагает горнолыжными трассами всех категорий , включая трассы для слалома и слалома-гиганта , имеющие FIS сертификаты.Современные подъемники обеспечивают катание без очередей. Снегоуплотнительные машины осуществляют подготовку трасс.",coordinateX:53.83249709999999,coordinateY:58.596172000000024),
        
        City( id:2,category:"Город",name:"Адлер",text:"Адлер-курорт на Черном море, отдаленный микрорайон города Сочи. Этот район расположен на равнине, при впадении в Чёрное море реки Мзымты, с севера защищен Главным Кавказским хребтом с его вечными льдами и не тающими даже летом, вершинами, что тем самым обуславливает здесь относительно высокие среднегодовые температуры воздуха.Купальный сезон здесь продолжается 5 месяцев с июня по октябрь, летом средняя температура воздуха +26,5С, воды +24,5С. Благоприятные сезоны для санаторно-курортного лечения: осень, зима, весна. В период «зимы», средняя температура воздуха составляет +9, +10С.",coordinateX:43.427991 ,coordinateY:39.928844),
        City(id:3,category:"Город",name:"Адыгея",text:"Адыгею каждый год посещают тысячи туристов. Они приезжают сюда, чтобы сплавиться по рекам, пройти горными тропами, совершить восхождения, покататься на сноубордах и лыжах. Обширные территории девственной природы, большое разнообразие рельефа, дремучие заповедные леса, прекрасные каньоны горных рек, потрясающие альпийские луга манят к себе почитателей активного отдыха.Адыгея предлагает туристам и отдыхающим огромный спектр видов активного отдыха - водный туризм, альпинизм, каньонинг, горные лыжи, дельтапланеризм, спелеотуризм, езду на снегоходах, внедорожниках и квадроциклах. Также популярными видами отдыха в республике являются пеший, велосипедный и конный туризм.",coordinateX: 43.966332 ,coordinateY:39.272692),
        City(id:4 ,category:"Город",name:"Александров",text:"Город Александров расположен в юго-восточной части Смоленско-Московской возвышенности, в 125 км к северо-западу от Владимира и в 120 км к северо-востоку от Москвы. Через город протекает река Серая. С давних пор земли Александровской слободы служили охотничьими угодьями для переяславских, звенигородских, владимирских и московских князей. В начале XVI века Василий III направляет в слободу русских и иностранных мастеров для строительства своего загородного дворца и Алексадровская слобода становится любимым местом отдыха великого князя с женой. В царствование Ивана Грозного Александровская Слобода становится центром Русского государства и на территории Государева двора воздвигаются подлинные шедевры древнерусского каменного зодчества.С 1778 года слобода переименована в город. На его гербе были изображены две на-ковальни и тиски в знак того, что в Александрове славились своими изделиями кузнецы. В 1788 году Екатериной II был утвержден первый регулярный план города Александрова. В конце XIX века в Александрове происходит интенсивное строительство: возводятся здания мануфактур, фабрик, доходные, торговые и казенные дома. Формируется неповторимый облик провинциального уездного городка, который в большей степени сохранен и поныне.В 1513 году в Александровой слободе русскими и итальянскими зодчими был построен загородный дворец великого князя Василия III. Из этого дворцово-храмового комплекса сохранились следующие здания: Троицкий собор; Покровская церковь; Распятская колокольня и Успенская церковь. В настоящее время памятники архитектуры древней Александровской слободы входят в состав музея-заповедника «Александровская слобода».В XVII-XVIII веках город продолжал разрастаться – по правому берегу вдоль московской дороги, были построены Спасо-Преображенская церковь и Христорождественский собор. Далее появилась главная на сегодняшний день улица Александрова и знаменитые Торговые ряды.В городе есть Литературно-художественный музей Марины и Анастасии Цветаевых, в котором рассказывается о жизни и творчестве не только Цветаевых, но и о других поэтах и писателях современности. Также интересен Художественный музей.",coordinateX:56.394731  , coordinateY: 38.712037),
        
        City(id:5,category:"Город",name:"Анапа",text:"Анапа находится в юго-западной части Краснодарского края РФ, на берегу Черного моря. Это один из крупнейших курортов России. Ландшафты курорта и окружающих его местностей весьма разнообразны: плавни, лиманы, соленые озера, предгорья с живописными долинами, реликтовыми лесами и растениями. Природно-климатические условия окрестностей позволяют выращивать лучшие лечебные сорта винограда, богатого глюкозой, витаминами и минеральными солями.",coordinateX:44.885701,coordinateY: 37.319919),
        
        City(id: 6,category:"Город",name:"Арзамас",text:"Своим появлением Арзамас обязан походам Ивана Грозного на Казанское и Астраханское ханства. Границы расширялись, их нужно было охранять. Пограничная крепость - городок Арзамас был основан на месте одного из мордовских поселений. Мордва не была обидчивой и ни разу не напала на город, зато гарнизон крепости принимал участие в подавлении крестьянских волнений (восстания под водительством Степана Разина).В первую очередь Арзамас – перекресток дорог, транспортный узел. Немудрено, что здесь побывало много путешествующих знаменитостей, начиная с поэта Пушкина, чье имение Большое Болдино совсем неподалеку. Продолжая литературную тему можно вспомнить, что здесь родился Аркадий Гайдар, а Максим Горький проживал в ссылке. Вот так - кому дом родной, кому каторга.Для современного путешественника - приятный городок с парой музеев на пути к таким интересным местам, как Большое Болдино или Дивеево. В любом случае, как бы не пролегал ваш путь - не стоит проходить этот город стороной.",coordinateX: 55.39646090000001 , coordinateY: 43.829917),
        
        City(id: 7,category:"Город",name:"Архангельск",text:"Исторически сложилось, что первым и долгое время единственным выходом в открытое морское пространство на Руси было Белое море. Не было ни Балтики, ни Черного, ни походов Ермака на Восток. По личному указанию Ивана Грозного в 1584 году закладывается первый российский город-порт. Имя городу дал стаявший неподалеку Михайло-Архангельский монастырь.Торговлю с Московским великим княжеством по Белому морю открыли англичане, в поисках северного морского пути в Китай, примерно в 1550-1560 годах. Основав город и порт, Грозный придал этой торговле статус наибольшего благоприятствования. Кстати, он вообще заигрывал с Британией.С другой стороны, освоение Севера вообще шло по Двине и Белому морю (и до английской торговли, и после её начала), т.о. Архангельск быстро оказался не просто торговым портом на пути в Англию, но и опорным пунктом в освоении Севера.Не удивительно, что и Петр I впервые увидел море в Архангельске, а не как многие из нас - летом с бабушкой в Крыму.Здесь он построил первый торговый российский корабль, а для него – придумал российский флаг.",coordinateX:64.547156  , coordinateY:40.56078 ),
        
        City(id :8,category:"Город",name:"Астрахань",text:"Астраханская рыбка и астраханские арбузы — каждый житель Союза хоть раз да слыхал о них, а то и самолично пробовал. Красавица-Астрахань, стоящая на Волге и Каспии, всегда представлялась русскому человеку краем изобилия. И до сих пор это остается справедливым. Лидирующие направления в области туризма в Астрахани — это охота и рыбалка, ставшие своего рода брендом региона. Кроме того, начинаясь в Москве, в Астрахани заканчиваются разнообразные речные круизы по Волге. А многочисленные архитектурные и культурные достопримечательности дают все основания задержаться здесь на несколько дней даже равнодушным к копченой осетрине и балыку из белуги путешественникам.Нынешняя Астрахань — наследница множества народов, веками сменявших друг друга на Каспии, и по сей день она остается одним из самых многонациональных и мультикультурных городов России. Недаром поэт Велимир Хлебников назвал ее «треугольником Христа, Будды и Магомета».",coordinateX: 46.358805,coordinateY: 48.059935),
        
        City(id:9 ,category:"Город",name:"Багратионовск",text:"«Город на границе». Так часто называют Багратионовск, который расположился среди холмов и озер у западной границы России. Имя героя Отечественной войны 1812 года генерала Петра Ивановича Багратиона было дано городу 7 сентября 1946 года и тогда же началась новая, российская страница в истории бывшего восточно-прусского города Прейсиш-Эйлау (хочу пояснить, что название «Preussisch Eylau» произносится как {Пройсиш Айлау}).Город основан в 1336 году.Его история восходит ко времени, когда Натангия, одна из земель пруссов, была завоевана рыцарями Тевтонского ордена. В 1325-1326 годах строится орденский замок Прейсиш-Эйлау, а позднее у его стен появляется поселок немецких колонистов. Первые упоминания о поселении относятся к 1336 и 1348 годам, когда жителями были определены условия пользования землей и права торговли. К этому времени относится и строительство первой церкви будущего города.В годы войн Тевтонского ордена с Польским королевством замок не раз выдерживал осаду, и его стены были надежной защитой жителям поселения. Сохранившиеся стены форбурга (передового укрепления) замка до сих пор поражают своей монументальностью.В XV веке название замка уже распространяется на поселение, которое к этому времени, превращается в ремесленный и торговый центр для близлежащих окрестностей. В 1585 году поселению даруются полные городские права: Прейсиш-Эйлау обретает самоуправление и городской герб, который представлял собой щит, разделенный на две части. На верхнем поле был изображен золотой лев — в европейской геральдике символ мужества и отваги. Возможно, что это — часть фамильного герба известного рыцаря Генриха Ройс фон Плауэна, которому в 1492 году за услуги перед орденом был пожалован замок Прейсиш-Эйлау. На нижнем серебряном поле — изображения трех крестов, как напоминание о том, кем был основан город.",coordinateX:54.384104 , coordinateY:20.646604 ),
        
        City(id: 10,category:"Город",name:"Белгород",text:"Белый город буквально оправдывает свое название. Крепость основана в 1596 году на меловой (белой) горе и стала главным городом Белгородской засечной черты. Первыми жителями стал гарнизон - казаки и стрельцы с семьями. Названия пригородов Белгорода несут воспоминания тех лет: Стрелецкое, Пушкарное, Драгунское. Функцией города была охрана рубежей государства от неспокойных соседей – Речи Посполитой и Крымского ханства. С образованием в 1765 году Слободской и Новороссийской губерний военная и пограничная функции утрачены, а в 1779 году город из административного центра Белгородской губернии, превращается в классический, неоднократно описанный в литературе, уездный город Курской.Очень бурно протекала уездная жизнь в период 1917-1922 годов. Установление советской власти, оккупация кайзеровскими войсками, включение в состав Украины Скоропадского, столица Советской Украины, контроль Добровольческой армией Юга России и, наконец, РСФСР, Белгород вновь становится районным центром Курской области.Отдельная страница период Великой Отечественной войны. Город был захвачен вермахтом в октябре 1941 года. Мало кто знает, но Белгород был освобожден дважды. Одна из центральных улиц носит имя танкиста Андрея Попова, погибшего при первом взятии города в феврале 1943 года, а вот про 5 августа знают все. Именно в день освобождения Белгорода и Орла, Москва впервые салютовала. Так, на долгие годы приобретен статус города первого салюта, а в 2007 году указом Президента России Белгород, наряду с Орлом и Курском, стал первым городом воинской славы Российской Федерации.С 1954 года Белгород становится областным центром вновь образованной Белгородской области, а с распадом СССР вновь превратился в юго-западные ворота России.",coordinateX:50.599713   , coordinateY:36.598262),
        City(id: 11,category:"Город",name:"Березники",text:"Несмотря на свое весьма натуралистическое название, полученное в честь заросшего березами урочища, Березники настоящий индустриальный гигант. Возникший на месте соляных промыслов, город не остановился на достигнутом – кроме месторождения калийных солей осваиваются и месторождение нефти, и месторождение силикатных песков. Странно даже, что город не получил имени Химград или Химстрой, а предлагали.Скучно? Не интересно? Пожалуй. Если только не посмотреть на Березники как на придаток другого города. Буквально на другом берегу Камы – только через мост переехать – еще один соляной промысел – Усолье – архитектурный музей под открытым небом. Вот только гостиниц нет, да и пообедать толком вряд ли удастся. Разумный компромисс – гуляем по Усолью, ночуем в Березниках.",coordinateX:56.982778  , coordinateY: 55.55305599999997),
        
        City(id:12 ,category:"Город",name:"Боровск",text:"Название Боровск получил по вечнозеленому древнему сосновому бору, раскинувшемуся с севера от города.Если сравнивать Боровск с другими подобными городам, то, наверное, стоит отметить, что вся его история, начиная с 1358 года, так и осталась на его улочках. При желании не трудно представить себе как здесь проходила дружина, чтобы под предводительством Князя Московского Дмитрия вступить в схватку с полчищами Мамая.И именно здесь в 1812 году Наполеон принял решение повернуть обратно по той самой небезызвестной, им же разоренной смоленской дороге. В Боровске до сих пор стоит дом, где ночевал французский полководец.В середине XVII века город оказался в центре событий церковного раскола. В Пафнутьев-Боровском монастыре дважды находился в заточении протопоп Аввакум, а в Боровском остроге, что на городище, сидели соратницы его - боярыня Морозова и ее сестра княгиня Урусова. Голодной смертью в земляной яме закончилась здесь их жизнь.Отдельного внимания заслуживает Боровская крепость. Именно она отражала все многочисленные набеги, доставшиеся городу за всю его долгую историю. Но, саму крепостную стену посмотреть, увы, не придется, поскольку она была разрушена еще в 17-забытом году с целью постройки улиц. Однако, в любом случае, обязательно стоит посмотреть все действующие церкви города (одна из них старообрядческая) .Но не только с трагическими событиями связана история города Боровска. Здесь началась учительская и научная деятельность родоначальника космонавтики К.Э. Циолковского. Здесь родились выдающийся математик и конструктор П.Л. Чебышев и художник-передвижник И.М. Прянишников.Есть в Боровске и современные достопримечательности, привлекающие в городе не меньше, чем его история. Пенсионер Владимир Овчинников в свободное время и на собственные средства рисует картины на стенах домов. В городе существует свыше сотни этих зарисовок на темы, связанные с историей и бытом Боровска.",coordinateX:55.2033534  , coordinateY:36.48264),
        
        City(id:13 ,category:"Город",name:"Брянск",text:"Брянск — административный центр области, граничащей с Украиной и Белоруссией, и один из немногих русских городов, возраст которых превышает 1000 лет. За это время Брянск успел побывать столицей княжества, военным форпостом на границе с Литвой и Речью Посполитой, стать крупным военно-промышленным центром, превратиться в важный железнодорожный узел и прославиться мужеством брянских партизан. О главных событиях в истории и знаменитых уроженцах Брянска напоминают бронзовые Александр Пересвет и Федор Тютчев, мемориальный комплекс «Партизанская поляна», Курган Бессмертия, городские музеи и выставки.В окружающих Брянск лесах и на берегах Десны целая россыпь пансионатов, баз отдыха, санаториев и клубных отелей, где можно неплохо отдохнуть",coordinateX: 53.26353059999999 , coordinateY: 34.41611),
        
        City(id:14 ,category:"Город",name:"Валдай",text:"Хотя Валдайском селище первый раз упоминается в 1495 году, городом оно стало лишь в 1770-м году. В 1653 году на одно из островов Валдайского озера был заложен Иверский монастырь.С тех пор история города неразрывна связана с историей монастыря. А также с трактом, связующим две столицы. Ведь недаром Валдай всегда славился своими колоколитейными мастерами.Ну, и, конечно, нельзя не упомянуть прекрасную природу Валдайского края. Огромнейшее озеро с многочисленными островками, прекрасный лес - все это давно привлекает сюда туристов.",coordinateX:57.97887890000001  , coordinateY: 33.24361499999998),
        
        City(id:15 ,category:"Город",name:"Великий Новгород",text:"Впервые Великий Новгород упоминается в 859 году, что само по себе древность кошмарная. А если учесть, что город избежал разорения во времена монголо-татарского нашествия, то можно сказать, что до наших дней ему удалось сохранить множество культурных и художественных ценностей. Великий Новгород буквально напичкан различными церквушками, храмами и историческими постройками. Не говоря уже о величественном кремле, заложенном князем Ярославом в 1044 году. На территории кремля сохранился самый древний каменный храм России - Софийский собор (1045-1050 гг.). А если выйти из ворот кремля, то на противоположной стороне реки Волхов сохранились белокаменные постройки торговых рядов.Великий Новгород занимает видное место в истории нашей Родины. Прежде всего, стоит вспомнить о существовании Новгородской республики, по тем временам самого большого государственного образования средневековой Европы. Шутка ли, иметь территорию, которая простирается от Великого литовского княжества до Уральских гор, от Белого моря до верховьев Волги. Кстати, стоит отметить, что Новгород уже имел, по меньшей мере, статус окна в Европу и даже состоял в ганзейском союзе, что само по себе много о чем говорит. И, как это не забавно, но Новгород был одним из самых благоустроенных городов Западной Европы. Новгородские мостовые на 200 лет старше парижских и на 500 - лондонских мостовых. В XII в. в Новгороде уже были водопровод и канализация.",coordinateX:58.52556980000001  , coordinateY:31.274192800000037 ),
        
        City(id:16 ,category:"Город",name:"Владимир",text:"Названная в честь основателя Владимира Мономаха и построенная в 1108 г мощная крепость расположилась на крутых берегах Клязьмы на самом краю необъятных мещерских лесов. А уже в 1157 г Юрием Долгоруким был создан новый княжеский двор и построена церковь в честь своего небесного покровителя Георгия (1157 г.). Далее в течение века город продолжал отстраиваться и разрастаться. В 1238 был сожжен татарами, после чего постепенно стал рядовым городом Московского государства.Кстати, тут была обнаружена одна из самых древних северных стоянок первобытного человека.",coordinateX: 56.1445956 , coordinateY: 40.41786860000002),
        
        /*   City(id:14 ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id:14 ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id:14 ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id:14 ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         */
        /*   City(id: ,category:"Город",name:"Ачинск",text:"Город Ачинск раскинулся на правом берегу реки Чулыма в устье притока реки Ачинки, между Салыркой, Тептяткой и Мазулькой, у отрогов Саянских гор. Официальной датой рождения города считают 1683 год. Начинался Ачинск с маленького острога, выросшего на берегу реки Чулым. Первые русские поселенцы появились в девственной тайге в конце XVII века. А уже через сотню лет деревянные домики, раскинувшиеся на территории крепости, получили статус уездного города, управление которым осуществлял городничий. Способствовали быстрой метаморфозе многие обстоятельства, Во-первых, смелость и трудолюбие далеких славных предков, современных жителей Ачинска. Во-вторых, достаточно привлекательные для добычи, жизни и продолжения рода места. В-третьих, возможность расширить границы отвоеванного у при¬роды мира. Опираясь на крепость, первопроходцы продвигались по Чулыму на юг, подчиняя или выгоняя в Монголию вольные киргизские племена. Таким образом, Ачинский блок-пост стал административным центром по сбору дани с кочевников, а позже и перевалочным пунктом на сухопутной дороге Тобольск - Иркутск.В 1785 г. Ачинску был пожалован герб с изображением лука и колчана со стрелами.В конце XVIII в. Ачинский уезд состоял из 11 волостей, в которых вместе с населением Ачинска проживало 17 373 чел.По данным 1834 года Ачинск имел уже одну полотняную фабрику, три кожевенных, два мыловаренных и один свечной завод.Ачинск выполнял роль перевалочного пункта: обозы с китайскими товарами шли до города, отсюда до Тобольска - на судах, из Тобольска обозы снова шли сухопутным путем в Москву, Петербург и другие пункты.",coordinateX:56.235527430884254  , coordinateY:90.49020051956177 ),
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id: ,category:"Город",name:"Аша",text:"Город был основан в 1898 году в связи со строительством чугуноплавильного завода Аша-Балашово, с 20 июня 1933 года — город, с 1 февраля 1963 года — город областного подчинения. День города празднуется в третью субботу июля.Название имеет два толкования. Одно рассматривает топоним с точки зрения оценки местных природных условий, сближая с тюркским глаголом «аш», «ас», со значением: переходить, переваливать (через горы), то есть река (Аша), пробивающаяся сквозь горы[4]. Другое толкование связывает название реки с башкирским родом «ассы», «ас», «аша», исходит из названия реки в первоисточниках — Ассы.В 2012 году в пещере около города впервые на Урале был найден зуб дикобраза, примерный возраст которого оценили в 120 тысяч лет. Ранее считалось, что они здесь никогда не водились",coordinateX: 54.98909339999999 , coordinateY:57.27338780000002 ),*/
        //City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
        City(id :17,category:"Город",name:"Волгоград",text:"Любители активного отдыха в Волгограде могут совершить незабываемые прогулки на катерах, лодках и туристических теплоходах. Для рыбаков здесь есть прекрасные туристические базы, которые кроме основных рекреационных услуг, организуют выезды в рыболовные угодья под руководством опытного егеря. Для рыбалки турбазы предоставляют рыбакам всё самое необходимое: рыболовные снасти, лодки и многое другое.Город Волгоград издавна славится как город-герой и поэтому большая часть его достопримечательностей напрямую связанная с событиям Великой Отечественной войны и, в частности, Сталинградской битвы. Безусловно, самой главной достопримечательностью города является Мамаев курган, именно здесь проходили самые ожесточенные бои.Кроме Мамаева кургана в Волгограде стоит посетить музей-панораму «Сталинградская битва», площадь Павших Борцов, планетарий, Танцующий мост и другие достопримечательности.Отдых в Волгограде представлен на любой вкус. Для любителей природы и свежего воздуха идеальными будут волгоградские туристические базы. Отличный отдых на берегах Ахтубы, Волги или Дона понравится как взрослым, так и детям.",coordinateX: 48.708599, coordinateY: 44.510883),
        
        City(id:18 ,category:"Город",name:"Вологда",text:"Вологда - один из старейших русских городов. Она впервые упоминается в письменных источниках в 1147 году. Имя город получил от небольшой спокойной реки, на чьих живописных берегах он и был основан по легендам чудотворцем Герасимом. В старину здесь проходил путь волока новгородцев.С самого своего основания Вологда считалась одновременно воротам на Север и кордоном, охранявшим Москву от иноземных завоевателей Кстати, у Вологды был шанс стать северной резиденцией Ивана Грозного. По его приказу в 1568г было начато строительство Кремля, внутри которого разместился Софийский кафедральный собор.В начале XVIII века в Вологде проездом побывал Петр Первый. В память о его пребывании в доме голландских купцов Гоутманов был создан первый городской музей. Вологодская земля дала России немало выдающихся деятелей науки, литературы, искусства. Среди них поэт К. Батюшков, писатель В. Гиляровский, знаменитый художник - баталист В.Верещагин, физиолог Н.Введенский, авиаконструктор-С.Ильюшин, летчик-космонавт П.Беляев. Каждый из них провел часть жизни в этом северном городе.И не зря упоминался в песне резной палисад. В Вологде и по сей день не мало домов украшено деревянными кружевами. Ну и, конечно, настоящие всемирно известные вологодские кружева по-прежнему встречаются как на окнах домов, так и в магазинах города.",coordinateX: 59.21806649999999 , coordinateY: 39.89780519999999),
        
        City(id: 19,category:"Город",name:"Воронеж",text:"Есть все же в нашей истории личности с большой буквы Л. Конечно, в отношении некоторых это утверждение можно оспорить, но вот по поводу Петра Первого, уверена, разногласий не будет. Много всего наворотил он в истории Государства Российского: и окна рубил, и бороды, да и вообще строил и перестраивал.Вот взять хотя бы Переславль. Ну как не назвать этот город колыбелью российского флота, если там и по сей день хранится знаменитый ботик - основоположник. Это если брать с точки зрения даты производства и спуска на воду. Если же приглядеться с другой стороны, а именно: оценить количественно этот вопрос, то почетное звание колыбели можно твердой рукой записать на счет города Воронежа. Именно здесь все тем же Петром было понастроено великое множества этих самых ботиков, а так же галер и других военных плавсредств.Самое первое поселение на месте современного Воронежа относится к XIII веку. Правда, как и многие города на Руси, это поселение было разграблено и уничтожено монголо-татарами. И следующей постройкой, которая появилась на этом месте, была пограничная крепость времен царя Федора Иоановича, построенная в 1586 году на тогдашней южной окарине московского государства. Но настоящая жизнь закипела тут начиная с 1696 года, при царе Петре 1. Как не трудно догадаться, кораблестроение дело важное и государственное, поэтому с этого момента город начал активно строиться, расти и развиваться. Понастроили немало: и верфи, и заводы, и мастерские с мануфактурами. Кстати, первый российский флот, построенный в Воронеже, насчитывал23 галеры и 4 брандера, среди них 36-пушечный галеас Апостол Петр.Однако, как говаривал Тарас Бульба - чем я тебя породил, тем я тебя: Петр построил Санкт-Петербург, и Воронеж утратил свое приоритетное значение, став просто главным городом одной из многих российских губерний.",coordinateX: 51.6754966 , coordinateY: 39.20888230000003),
        
        City(id:20 ,category:"Город",name:"Выборг",text:"Для жителя бывшего СССР, в этом городе может родиться только одна мысль - чужая земля. Может быть, все дело в старинной архитектуре, которая до сих пор сохранила свои готические черты, может быть в воздухе. В любом случае, если посмотреть на всю историю, то как ни крути, а первую руку к строительству Выборга приложили все-таки шведы, заложившие в 1293 году крепость, на месте безвестного племени жившего на территории нынешнего парка Монрепо, и умудрявшегося находить общий язык и со славянами, и со шведами, и с немцами.С тех пор так и повелось. Ну нельзя жить спокойно на границе, а уж чья она и с кем так это дело десятое. То шведы одержат верх, то новгородцы. Были, конечно, небольшие перемирия, но увы, очень и очень не надолго. В любом случае во времена Иванa III было замечено очередное обострение в и без того не простых русско-шведских отношениях, но ввиду того, что одна сторона не могла, а другая и подавно, кончилось это ничем, и до Петра I было практически все тихо. Ну а дальше, ясное дело кто же потерпит, чтобы буквально на заднем дворе его дачи находилась открытое скоростное шоссе, да еще упирающееся буквально в любимый сад? В общем, по итогам разбора полетов между побежденными и победителями Выборг остался за последними. Ну а по окончанию последней русско-шведской войны город стал частью княжества Финляндского, которое стало частью России, и превратился в порт с огромный грузооборотом.В 1917 году Финляндия благополучно получила независимость, а вместе с ней и Выборг, но надо сказать, что видимо у финнов были некоторые сомнения, в свете чего, они потратили 12 лет на строительство 135 километрового укрепления, название которого знает даже самый распоследний двоечник. Долго ли, коротко ли, но линия Маннергейма не вполне справилась с поставленной перед ней задачей, и по итогам маленькой, но очень обременительной в плане человеческих жертв и потерь техники, войне 1939 года между Россией и Финляндией, Выборг опять отошел в состав СССР. Правда уже в 1941 вернулся обратно.Зато буквально в 1944 году все опять вернулось на круги своя, на которых стоит и теперь. Ну а линия кое-где сохранилась и по сей день. Так что каждый желающий может познакомиться с ней поближе.",coordinateX: 60.713953 , coordinateY:28.757157),
        
        //City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
        
        City(id:22,category:"Город",name:"Геленджик",text:"Набережная города-курорта Геленджик считается самой длинной в мире, и по праву самой красивой и удобной для пеших прогулок на всем черноморском побережье. Берущая свое начало с одного мыса города она заканчивается в противоположном, вдоль всей бухты Геленджика. Но самая знаменитая часть набережной Геленджика называется Лермонтовский бульвар.Любители активного отдыха и ярких впечатлений по достоинству оценят широкий выбор экскурсий. Вы сможете посетить исторические памятники — дольмены, познав историю древних народов; полюбоваться красотой стремительных водопадов; совершить увлекательные конные прогулки и походы на лошадях или джиппинг-тур в горы.Ну а какой же отдых без морских развлечений?! В Геленджике вы сможете приобщиться к виндсерфингу, кайтсерфингу, погрузиться с аквалангом, покататься на гидроциклах или оправиться на морскую прогулку на яхте или теплоходе.",coordinateX: 44.587533, coordinateY: 38.037028),
        /*
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         
         City(id:8,category:"Город",name:"Казань",text:"Казань – столица Татарстана, расположена на левом берегу Волги, при впадении в неё реки Казанка. Это один из древнейших приволжских городов, основанный как пограничная крепость в 1005 году волжскими булгарами. С 1438 года город становится столицей Казанского ханства. В 1552 году Казань была завоёвана Иваном Грозным и Казанское ханство было присоединено к России. В 2005 году Казань торжественно отметила свое тысячелетие. К этому событию были отреставрированы многие памятники архитектуры, пущена первая линия метро. Обратной стороной подготовки к празднику стало масштабное разрушение исторической застройки центра города.Главная достопримечательность Казани – кремль, построенный во времена Ивана Грозного. В кремле расположена построенная совсем недавно мечеть Кул-Шариф, поражающая своими размерами и красотой убранства. Также в кремле находится символ города - падающая башня Сююмбике, с которой связано множество легенд и преданий. В Крестовоздвиженском соборе паломники и туристы могут увидеть знаменитую икону Казанской божьей матери.",coordinateX:  55.830431 , coordinateY:49.066081),
         
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         
         City(id: ,category:"Город",name:"Киров",text:"Киров – административный центр Кировской области, город в среднем течении реки Вятки. До 1780 года – город Хлынов, с 1780 по 1934 год Вятка, после 1934 года - Киров.По данным археологов, более 2,5 тысяч лет назад в долине Вятки обитали племена предков современных удмуртов и коми. В Повести о стране Вятской упоминается, что город был основан после 1181 года. На Вятских землях возникла вечевая республика – образец древнерусской демократии, где главным политическим органом являлось народное вече.Разрозненным русским княжествам пришлось объединиться перед угрозой захвата Золотой Ордой. Хлынов вошел в состав Московского царства. Совместно с московскими войсками вятичи ходили в поход против татар, а затем еще неоднократно выступали против общих врагов. На смену вечевой республике пришла централизованная царская власть. В царской России Хлынов стал крупным культурным, религиозным и просветительским центром, славящимся своими учебными заведениями, библиотекой, театрами, а затем и первыми кинотеатрами.В советское время город сохранил свое культурное значение, здесь также начали строить заводы и фабрики. В 1934 году город был переименован и получил название Киров.Многие туристы едут в Киров специально ради того, чтобы приобрести знаменитые дымковские игрушки. Здесь также есть Музей дымковской игрушки, насчитывающий более 700 экспонатов. Здесь можно узнать историю развития ремесла и увидеть раритетные экземпляры дымковской игрушки.В Кирове построен один из лучших планетариев страны, оборудованный оптикой знаменитой фирмы Карл Цейс. Проводятся лекции как для взрослых, так и для детей старше 5 лет.",coordinateX:  58.603532 , coordinateY: 49.666798),
         
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         
         City(id: ,category:"Город",name:"Краснодар",text:"Краснодар – это не только экономический и деловой город, но и известный туристический центр. В XIX ст. здесь появилось огромное количество деревянных домов, выполненных в стиле классицизма, некоторые сохранились до сегодняшних дней и все также влияют на формирование внешнего облика города.Все самые важные культурные объекты расположены на главной улицей города – Красной. В начале XX ст. город называли маленьким Парижем. В Краснодаре имеются сооружения, выполненные в разных архитектурных стилях, в зависимости от эпох - это барокко, классицизм и модерн. Особо интересны доходный дом барона Штейгеля и здания художественного музея. В Краснодаре располагается один из самых крупных в России кинотеатров - «Аврора», немало интересных музеев. Например, Краеведческий музей, который рассказывает своим посетителям о развитии, культуре края и истории народов, проживающих здесь, начиная с древних времен, музей истории казачества на Кубани, литературный музей. Имеются в городе и достаточно необычные музеи, к примеру, музей «Самсон», посвященный культуристам.",coordinateX: 45.039267 , coordinateY: 38.987221),
         
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id: ,category:"Город",name:"Пенза",text:"Пенза – административный центр Пензенской области, расположенный в центральном районе Европейской части России на Приволжской возвышенности на берегах реки Суры.Пензенская крепость была построена в 1663 году по приказу царя Алексея Михайловича для охраны юго-восточных рубежей России. Постепенно, с расширением Российской империи, военное значение крепости было утрачено. Город разрастался, становясь культурным и торговым центром уезда. В 1858 году половина города сгорела в большом пожаре. В 1874 году в Пензе была построена железнодорожная станция ветки Моршанск – Сызрань.Важную роль сыграла Пенза во время Великой Отечественной войны, когда в город были эвакуированы промышленные предприятия с запада страны. В послевоенные годы в Пензе бурными темпами строились промышленные предприятия.В Пензе работает множество разнообразных музеев и театров. Особой популярностью пользуется Пензенский планетарий, построенный в парке имени В.Г. Белинского, где в 1928 году была открыта Народная Обсерватория. Планетарий оборудован отличной современной цейсовской оптической системой. Здесь проводятся лекции по астрономии для взрослых и детей.Рядом с поселком Сосновка под Пензой находится действующая детская железная дорога протяженностью 2,5 км.Областная картинная галерея имени К.А. Савицкого располагает обширной коллекцией русского искусства с XIII по XX века. Фонд галереи насчитывает более 12 тысяч экспонатов.",coordinateX: 53.22729 , coordinateY: 45),
         
         City(id: ,category:"Город",name:"Пермь",text:"Пермь – административный центр Пермского края, расположен в предгорьях Урала на реке Каме. В 1720 году по приказу царя Петра I выдающийся русский географ и путешественник капитан-поручик В.Н. Татищев отправился на разведку месторождений медных руд, чтобы построить медеплавильный завод и основать город металлургов. Им было выбрано место возле устья реки Егошихи. В 1721 году вместо отозванного Татищева проект завода и города продолжил назначенный на его место Г.В. де Геннин. В 1723 году завод был построен и начал работать. В 1788 году Егошинский рудник был полностью выработан и закрыт, но к этому времени город Пермь уже стал крупным транспортным узлом и административным центром края. В 1878 году была построена Уральская железная дорога. В годы советской власти Пермь развивалась как промышленный город.       Пермь – старинный город, богатый достопримечательностями. Здесь сохранилось много православных храмов. Последние десятилетия они переданы верующим и восстановлены. Среди них - старейший Петропавловский собор, построенный в стиле барокко в XVIII столетии. Снова действует Бахаревский Богородице-Казанский Серафимо-Алексеевский женский монастырь, знаменитый еще и своими чудотворными святыми источниками.       Музей Пермских древностей представляет более 2000 экспонатов, многие из которых уникальны. Музей оборудован по последнему слову техники и экскурсии в нем очень познавательны. Здесь можно увидеть реконструированных ящеров, доисторические растения, вымершие древние обитатели пермского моря и многое другое. Уникальная экспозиция установлена у железнодорожного вокзала. Называется она «Сад камней» - это современный арт-объект, аналогов которого нет в России.",coordinateX:58.014009  , coordinateY:56.263347 ),
         City(id: ,category:"Город",name:"Самара",text:"Самара – город в Среднем Поволжье, административный центр Самарской области. Расположен на левом берегу Волги, в месте, где в нее впадает река Самара.Укрепленный город был заложен в 1586 году по приказу русского царя Федора Иоанновича с целью охраны речного торгового пути по Волге. Однако, еще до того, как дальновидный государь решил построить здесь военное укрепление, город возле Самарской Луки упоминался в русских летописях за 1361 год.В смутные времена XVII-XVIII веков Самара оказалась вовлечена в крестьянские восстания Степана Разина и Емельяна Пугачева. Благодаря своему выгодному положению Самара стала центром торговли сельскохозяйственными, ремесленными, мануфактурными товарами. Город богател и благоустраивался. Самарская пристань стала одной из лучших в стране. В 1850 году город стал административным центром губернии. В 1874 году открылось движение по Оренбургской железной дороге.При советской власти в 1935 году Самара, а вместе с ней и Самарская область, были переименованы в Куйбышев и Куйбышевскую область. Во время Великой Отечественной войны в Самару были эвакуированы заводы, а также правительственные, дипломатические и культурные учреждения. Для Сталина даже был построен личный бункер. Годы эвакуации серьезно повлияли как на количество населения, так и на промышленный, культурный, административный потенциал города.В 1991 году городу было возвращено его историческое название.  Самарский художественный музей располагает интересной коллекцией русской живописи, также в музее немало внимания уделено европейскому и азиатскому искусству.Секретный бункер, построенный для Сталина, теперь открыт для посещения туристами.Особняк А.П. Курлиной – здание построенное в стиле модерн. Памятников архитектуры этого самобытного направления в городе сохранилось очень немного. В особняке восстановлены оригинальные интерьеры 22 комнат.Самара - многоконфессиональный город. Здесь можно увидеть множество культовых сооружений - старинных православных церквей, католическую и лютеранскую церковь, молитвенные дома баптистов и пятидесятников, синагогу, мечети.",coordinateX: 53.241504 , coordinateY:50.221246 ),
         */
        /* City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),
         City(id: ,category:"Город",name:"",text:"",coordinateX:  , coordinateY: ),*///*******************/*/
        City(id: 22,category:"Город",name:"Челябинск",text:"Челябинск имеет репутацию индустриального гиганта. Не меньше половины его площади занимают гигантские промзоны. Город знаменит своими заводами – монстрами: ЧМЗ, ЧТЗ, ЧТПЗ. Если перейти на русский, то это различные заводы: металлургический, электрометаллургический, тракторный, трубопрокатный, коксохимический, цинково-электролитный и другие. На фотографиях города в интернете – дымящие трубы.В последнее время город и его жители оказались на слуху благодаря фрезеровщику Ивану Дулину и соответствующим эпизодам «Нашей Раши». «Челябинские мужики настолько суровы, что не пьют кофе, а жрут его ложкой из банки». «Челябинские мужики настолько суровы, что намазывают на хлеб нож». «Челябинские мужики настолько суровы, что не доят корову, а выжимают ее целиком».А еще не так давно по телевизору шел фильм из цикла Леонида Каневского «Следствие вели». Бандиты в Челябинске, работая под видом таксистов, убивали пассажиров по дороге из аэропорта. Спохватились насчет пропаж приезжих не сразу – на счету банды 15 убийств.Неудивительно, что туристы в Челябинск не едут. Однако странно считать себя путешественником по России, не объехав при этом хотя бы по разу все её города-миллионеры. Направляясь в город, мы с женой были уверены, что в мегаполисе такого размера обязательно найдем что-то интересное.КРАТКАЯ ИСТОРИЯ. Челябинск был основан как крепость в 1736 году, входил в Оренбургскую губернию. В XIX веке он был тихим уездным городом с вяло текущей экономической и культурной жизнью. Переворот в развитии свершился в конце XIX века в связи со строительством Сибирской железной дороги от Самары до Омска через Уфу-Златоуст-Челябинск. Городу выпала честь стать «воротами в Сибирь», и к началу XX века он становится крупнейшим торгово-посредническим центром России. В период индустриализации здесь были построены знаменитые на всю страну крупнейшие промышленные предприятия. Достаточно назвать Челябинский Тракторный, в годы Великой Отечественной войны выпускавший танки для Советской Армии.Из письма Сталину Кузьмы Рындина, первого секретаря Челябинского обкома и горкома: «Челябинск» в переводе на русский язык означает «яма». Поэтому часто при разговорах слово «челяба» употребляется как что-то отрицательное, отсталое. Название города давно уже устарело, оно не соответствует его внутреннему содержанию… Потому мы просим Вас разрешить нам переименовать город Челябинск в город Кагановичград». Однако Сталин написал на этом письме «Против». Первого секретаря через два года расстреляли – впрочем, вовсе не за это.Город активно рос, миллионный житель появился в нем еще в 1976 году. По переписи 2010 года город по численности населения занимал девятое место в России",coordinateX:55.1644419  , coordinateY:61.4368431 ),
    ]
    

    
    if let splitViewController = splitViewController {
      let controllers = splitViewController.viewControllers
      detailViewController = (controllers[controllers.count-1] as! UINavigationController).topViewController as? DetailViewController
    }
  }
  
  override func viewWillAppear(_ animated: Bool) {
    clearsSelectionOnViewWillAppear = splitViewController!.isCollapsed
    super.viewWillAppear(animated)
  }
  
  override func didReceiveMemoryWarning() {
    super.didReceiveMemoryWarning()
  }
  
  // MARK: - Table View
  override func numberOfSections(in tableView: UITableView) -> Int {
    return 1
  }
  
  override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    if searchController.isActive && searchController.searchBar.text != "" {
      return filteredCandies.count
    }
    return cities.count
  }
  
  override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath)
    let city: City
    if searchController.isActive && searchController.searchBar.text != "" {
      city = filteredCandies[(indexPath as NSIndexPath).row]
    } else {
      city = cities[(indexPath as NSIndexPath).row]
    }
    cell.textLabel!.text = city.name
    cell.detailTextLabel!.text = city.category
    return cell
  }
  
  func filterContentForSearchText(_ searchText: String, scope: String = "All") {
    filteredCandies = cities.filter({( city : City) -> Bool in
      let categoryMatch = (scope == "All") || (city.category == scope)
      return categoryMatch && city.name.lowercased().contains(searchText.lowercased())
    })
    tableView.reloadData()
  }
  
  // MARK: - Segues
  override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    if segue.identifier == "showDetail" {
      if let indexPath = tableView.indexPathForSelectedRow {
        let city: City
        if searchController.isActive && searchController.searchBar.text != "" {
          city = filteredCandies[(indexPath as NSIndexPath).row]
        } else {
          city = cities[(indexPath as NSIndexPath).row]
        }
        let controller = (segue.destination as! UINavigationController).topViewController as! DetailViewController
        controller.detailCity = city
        controller.navigationItem.leftBarButtonItem = splitViewController?.displayModeButtonItem
        controller.navigationItem.leftItemsSupplementBackButton = true
      }
    }
  }
  
}

extension MasterViewController: UISearchBarDelegate {
  // MARK: - UISearchBar Delegate
  func searchBar(_ searchBar: UISearchBar, selectedScopeButtonIndexDidChange selectedScope: Int) {
    filterContentForSearchText(searchBar.text!, scope: searchBar.scopeButtonTitles![selectedScope])
  }
}

extension MasterViewController: UISearchResultsUpdating {
  // MARK: - UISearchResultsUpdating Delegate
  func updateSearchResults(for searchController: UISearchController) {
    let searchBar = searchController.searchBar
    let scope = searchBar.scopeButtonTitles![searchBar.selectedScopeButtonIndex]
    filterContentForSearchText(searchController.searchBar.text!, scope: scope)
  }
}
